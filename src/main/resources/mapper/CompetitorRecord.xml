<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.springmvc.dao.CompetitorRecordDao">

    <insert id="insertCompetitorRecord" parameterType="cn.springmvc.model.CompetitorRecord">
        insert into competitorrecord(
        competitionId,
        competitorId,
        ranking,
        teamOrNot
        ) values(
        #{competitionId},
        #{competitorId},
        #{ranking},
        #{teamOrNot})
    </insert>



    <select id="getLeaderBoardByCompetitionId" resultType="cn.springmvc.model.CompetitionLeaderboard">
        select
        competitionId,ranking,teamMember,teamMemberId
        from
        competitionleaderboard
        WHERE competitionId = #{competitionId}
    </select>

    <select id="getCompetitorIds" resultType="java.lang.Integer">
        select
        DISTINCT competitorId
        from
        competitorrecord
    </select>

    <select id="getCompetitorRecordByCompetitorId" parameterType="java.lang.Integer" resultType="cn.springmvc.model.CompetitorRecord">
        select
        *
        from
        competitorrecord
        WHERE competitorId = #{competitorId}
    </select>

    <select id="getLimitCompetitorRecordByCompetitorId" parameterType="java.lang.Integer" resultType="cn.springmvc.model.CompetitorRecord">
        select
        *
        from
        competitorrecord
        WHERE competitorId = #{competitorId} ORDER BY ranking ASC LIMIT 10
    </select>

    <select id="existOrNot" resultType="java.lang.Integer">
        select count(*)
        from competitorrecord
        WHERE competitorId = #{competitorId} and competitionId = #{competitionId}
    </select>

    <select id="getSoloOrTeam" resultType="java.lang.Integer">
        select teamOrNot
        from competitorrecord
        WHERE competitorId = #{competitorId} and competitionId = #{competitionId}
    </select>
</mapper>